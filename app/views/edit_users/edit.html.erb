<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Usuário - Camaar</title>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>
<body>
    <header class="header1">
        <div class="logo1">
            <%= link_to "Camaar", links_path %>
        </div>
        <p>Editar Usuário</p>
        <nav class="nav1">
            <%= button_to "Voltar", links_path, method: :get, class: "btn btn-success" %>
            <% if current_user %>
                <%= button_to "Logout", logout_path, method: :delete, class: "btn btn-danger2" %>
            <% end %>
        </nav>
    </header>
    <div class="coluna">
        <% if flash[:alert] %>
            <div class="alert alert-danger">
                <% flash[:alert].split(", ").each do |error| %>
                    <div class="error-line"><%= error %></div>
                <% end %>
            </div>
        <% end %>

        <% if current_user %>
            <h2>Informações do Usuário</h2>
            <p><strong>E-mail:</strong> <%= current_user.email %></p>
            <p><strong>Matricula:</strong> <%= current_user.matricula %></p>
            <p><strong>Nome:</strong> <%= current_user.name %></p>
            <p><strong>Curso:</strong> <%= current_user.course %></p>
            <p><strong>função:</strong> <%= current_user.role %></p>
        <% end %>

        <%= form_for(@user, url: edit_user_path(@user), method: :put, data: { turbo: false }) do |f| %>

            <div>
                <%= f.label :usuario, "Nome de usuário" %>
                <%= f.text_field :usuario %>
            </div>

            <div>
                <%= f.label :password, "Nova senha (deixe em branco para não alterar)" %>
                <%= f.password_field :password %>
            </div>

            <div>
                <%= f.label :password_confirmation, "Confirmar nova senha" %>
                <%= f.password_field :password_confirmation %>
            </div>

            <div>
                <%= f.submit "Salvar alterações", class: "btn btn-success" %>
            </div>
        <% end %>

        <%= button_to "Excluir Conta", edit_user_path(@user), method: :delete, data: { confirm: "Tem certeza que deseja excluir sua conta? Essa ação não pode ser desfeita." }, class: "btn btn-danger3" %>
    </div>
</body>
</html>